<html>
	<head>
		<title>Stats</title>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	    <link rel="alternate" type="application/rss+xml" href="https://ervik.hopto.org/aotd/rss/spotify.xml" title="Album of the Day on Spotify">
		<style type="text/css">
			body {
				font-family: sans-serif;
				text-align: center;
			}
			a {
				text-decoration: none;
			}
			h1 {
				margin-bottom: -15px;
			}
			h2 {
				margin-bottom: 5px;
			}
			.image {
				display: block;
				margin: auto;
				width: 50%;
			}
			.providers {
				margin: auto;
				padding: 10px;
				width: 25%;
			}
			hr { 
			  display: block;
			  margin-top: 0.5em;
			  margin-bottom: 0.5em;
			  margin-left: 33%;
			  margin-right: 33%;
			  border-style: inset;
			  border-width: 1px;
			} 
			.disabled {
				color: lightgray;
			}
			.miniscule {
				font-size: 0.3em;
			}

		</style>
	</head>
	<body>
		<h1>Stats</h1>
		<br>
		<center>
			<table>
				<tr>
					<th>Decade</th>
					<th>Count</th>
					<th>Percent</th>
				</tr>
				<% total = stats[:years].map{ |a| a[1] }.inject(&:+) %>
				<% days_in_decade = (Date.parse("2030-01-01") - Date.parse("2020-01-01")).to_i %>
				<% current_day_in_decade = (Date.today - Date.parse("2020-01-01")).to_i %>
				<% proportion = current_day_in_decade.to_f/days_in_decade.to_f %>
				<% stats[:years].each do |d,c| %>
					<% if d<"202" %>
				<tr>
					<td><%= d %>0s</td>
					<td><%= c %></td>
					<td style="text-align:right"><%= ((c.to_f/total.to_f)*100).round %>%</td>
				</tr>
					<% else %>
					<td><%= d %>0s*</td>
					<td><%= "#{c} (Adjusted: #{(c/proportion).round})" %></td>
					<td style="text-align:right"><%= ((c.to_f/total.to_f)*100).round %>%</td>
					<% end %>
				<% end %>
				<tr>
					<td>Total:</td>
					<td><%= total %></td>
					<td style="text-align:right">100%</td>
				</tr>
			</table>
			<small><%= "*Only #{(proportion*100).round(2)}% of the decade has passed." %></small>
		</center>
	</body>
</html>